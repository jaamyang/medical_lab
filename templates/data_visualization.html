{% extends 'base.html' %}
{% load staticfiles %}



{% block title %}
    数据分析工具
{% endblock %}


{% block style %}
 
{% endblock %}


{% block content %}
<br>
{#    <div class="col-sm-3 "  style="float:left;">#}
{#      <div class="card mb-3">#}
{#        <div class="card-body">#}
{#          <form action="" method="GET">#}
{#            <h4 class="card-title">分析选项</h4>#}
{#            <hr>#}
{#            <p class="card-text">1. 请选择调查阶段</p>#}
{#              <select name="period">#}
{#                <option value="one" selected="selected">2001~2005</option>#}
{#                <option value="six">2006~2011</option>#}
{#              </select>#}
{#              <br>#}
{#            <p class="card-text">2. 请选择分析类型</p>#}
{#              <select name="type">#}
{#                <option value="basic" selected="selected">基本分析</option>#}
{#                <option value="comprehensive">综合分析</option>#}
{#              </select>#}
{#              <br>#}
{#            <p class="card-text">3. 请选择分析指标</p>#}
{#              <select name="bodySystem">#}
{#                <option value="normal" selected="selected">一般体质</option>#}
{#                <option value="blood">血液生化</option>#}
{#                <option value="recycle">循环功能</option>#}
{#                <option value="bone">骨密度</option>#}
{#                <option value="breath">呼吸功能</option>#}
{#              </select>#}
{#              <br>#}
{#              <select name="body">#}
{#                <option value="height" selected="selected">身高</option>#}
{#                <option value="weight">体重</option>#}
{#                <option value="BMI">BMI</option>#}
{#                <option value="sitting">坐高</option>#}
{#                <option value="hips">臀围</option>#}
{#                <option value="bust">胸围</option>#}
{#                <option value="waist">腰围</option>#}
{#                <option value="SYS">收缩压（血压计）</option>#}
{#                <option value="DIA">舒张压（血压计）</option>#}
{#                <option value="heart">心率（人工测量）</option>#}
{#              </select>#}
{#              <br>#}
{#            <p class="card-text">4. 请选择分析人群</p>#}
{#              性别：#}
{#              <select name="sex">#}
{#                <option value="all" selected="selected">全部</option>#}
{#                <option value="male">男</option>#}
{#                <option value="female">女</option>#}
{#              </select>#}
{#              <br>#}
{#              省份：#}
{#              <select name="sex">#}
{#                <option value="all" selected="selected">全部</option>#}
{#                <option value="beijing">北京</option>#}
{#                <option value="hebei">河北</option>#}
{#                  <option value="zhejiang">浙江</option>#}
{#                <option value="guangxi">广西</option>#}
{#              </select>#}
{#              <br>#}
{#              民族：#}
{#              <select name="sex">#}
{#                <option value="all" selected="selected">全部</option>#}
{#                <option value="han">汉族</option>#}
{#                <option value="minority">少数民族</option>#}
{#              </select>#}
{#              <br>#}
{#              年龄段：#}
{#              <select name="age">#}
{#                <option value="all" selected="selected">全部</option>#}
{#                <option value="seven">7~8岁</option>#}
{#                <option value="nine">9~10岁</option>#}
{#                <option value="eleven">11~12岁</option>#}
{#                <option value="thirteen">13~14岁</option>#}
{#                <option value="fifteen">15~16岁</option>#}
{#                <option value="seventeen">17~18岁</option>#}
{#                <option value="nineteen">19~26岁</option>#}
{#                <option value="twenty">27~34岁</option>#}
{#                <option value="thirty">35~44岁</option>#}
{#                <option value="forty">45~54岁</option>#}
{#                <option value="others">大于55岁</option>#}
{#              </select>#}
{#              <br>#}
{#            <a href="#" class="btn btn-outline-info">重置</a>#}
{#            <a href="#" class="btn btn-info">分析</a>#}
{#          </form>#}
{#        </div>#}
{#      </div>#}
{#    </div>#}
    <div class="col-sm-9">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">分析结果</h4>
          <hr>
          <div id="tall_pie" style="width: 400px;height:400px; float:left;"></div>
          <hr>
          <div id="tall_bar" style="width: 400px;height:400px;float:right;"></div>
        </div>
      </div>
    </div>
</div>
  <div>
    
  </div>

{% endblock %}


{% block script %}
  <script src="{% static 'js/plug-in.js' %}" ></script>
  <script src="{% static 'js/echarts.common.min.js' %}"></script>

  <script type="text/javascript">
/*    var chart1 = echarts.init(document.getElementById('tall_bar'));
    var chart2 = echarts.init(document.getElementById('tall_pie'));*/
        // 指定图表的配置项和数据
       /* var tall_option_bar = {
            title: {
                text: '身高频数直方图'
            },
            tooltip: {},
            legend: {
                data: ['样本例数']
            },
            xAxis: {
                data: ["89.20", "95.89", "102.59", "109.28", "115.98", "122.67", "129.36", "136.06", "142.75", "149.44", "156.14", "162.83", "169.52", "176.22", "182.91", "189.61", "196.30"]
            },
            yAxis: {},
            series: [{
                name: '人数',
                type: 'bar',
                data: [1, 1, 1, 1, 10, 30, 100, 200, 550, 1200, 1900, 2150, 1600, 890, 210, 21, 5]
            }]
        };

        var tall_option_pie = {
            backgroundColor: '#2c343c',

            title: {
                text: '身高百分比',
                left: 'center',
                top: 20,
                textStyle: {
                    color: '#ccc'
                }
            },

            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },

            visualMap: {
                show: false,
                min: 80,
                max: 600,
                inRange: {
                    colorLightness: [0, 1]
                }
            },
            series: [
                {
                    name: '身高',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', '50%'],
                    data: [
                        {value: 10, name: '89.20'},
                        {value: 10, name: '95.89'},
                        {value: 10, name: '102.59'},
                        {value: 10, name: '109.28'},
                        {value: 30, name: '115.98'},
                        {value: 100, name: '122.67'},
                        {value: 200, name: '129.36'},
                        {value: 550, name: '136.06'},
                        {value: 1200, name: '142.75'},
                        {value: 1900, name: '149.44'},
                        {value: 2150, name: '156.14'},
                        {value: 1600, name: '162.83'},
                        {value: 890, name: '169.52'},
                        {value: 210, name: '176.22'},
                        {value: 21, name: '182.91'},
                        {value: 5, name: '189.61'},
                    ].sort(function (a, b) {
                        return a.value - b.value;
                    }),
                    roseType: 'radius',
                    label: {
                        normal: {
                            textStyle: {
                                color: 'rgba(255, 255, 255, 0.3)'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            lineStyle: {
                                color: 'rgba(255, 255, 255, 0.3)'
                            },
                            smooth: 0.2,
                            length: 10,
                            length2: 20
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: '#c23531',
                            shadowBlur: 200,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    },

                    animationType: 'scale',
                    animationEasing: 'elasticOut',
                    animationDelay: function (idx) {
                        return Math.random() * 200;
                    }
                }
            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        chart1.setOption(tall_option_bar);
        chart2.setOption(tall_option_pie);
 */
    var myChart1 = echarts.init(document.getElementById('tall_bar'));
    var myChart2 = echarts.init(document.getElementById('tall_pie'));
    myChart1.setOption({
        title: {
            text: ''
        },
        tooltip: {},
        legend: {
            data:['销量']
        },
        xAxis: {
            data: []
        },
        yAxis: {},
        series: [{
            name: '',
            type: 'bar',
            data: []
        }]
    });
    myChart1.showLoading();
    $.get('{% url 'data_process' %}').done(function (data) {
        // 填入数据
        myChart1.hideLoading();
        myChart1.setOption({
            title:{
                text: data.title
            },
            legend: {
                data:[data.present]
            },
            xAxis: {
                data: data.name
            },
            series: [{
                // 根据名字对应到相应的系列
                type: data.type[1],
                name: data.present,
                data: data.data
            }]
        });
        myChart2.setOption({
            title:{

            }
        })
    });



  </script>
  
{% endblock %}


